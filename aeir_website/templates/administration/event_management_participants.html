{% extends 'base.html' %} 

{% block title %}AEIR - Administration{% endblock %}

{% block content %}

<div class="row">
    <div class="col-md-8">
        <strong>{{ event }}, {{ event.date }}</strong>
        <br>
        <strong>Nombre total de participants</strong> : {{ event.total_participants }}
        <br>
        <strong>Nombre d'amicaliste participants</strong> : {{ participants|length }}
        <br>
        <strong>Nombre de non-amicaliste participants</strong> : {{ event.participants_non_adherents }}
    </div>
    <div class='col-md-4 m-auto'>
        <form method="post">
            {% csrf_token %}
            <button class="btn btn-sm btn-info" type="submit" name="delete_non_adherent"><i class="fas fa-trash-alt"></i> Supprimer un non-amicaliste</button>
        </form>
    </div>
</div>

<hr>

<div class="card">
    <table class="table table-hover">
        <thead>
            <tr>
            <th scope="col">Nom</th>
            <th scope="col">Prénom</th>
            <th scope="col">Adresse</th>
            <th scope="col">Promo</th>
            <th scope="col">Supprimer</th>
            </tr>
        </thead>
        <tbody>
            <form method="post">
                {% csrf_token %}
            {% if participants %}
                {% for obj in participants %}
                    <tr>
                    <td>{{ obj.last_name }}</td>
                    <td>{{ obj.first_name }}</td>
                    <td>{{ obj.email }}</td>
                    <td>{{ obj.school_year }} {{ obj.departement }}</td>
                    <td><button class="btn btn-sm btn-danger" type="submit" name="delete_adherent_{{ obj.id }}"><i class="fas fa-trash-alt"></i> Supprimer</button></td>
                    </tr>
                {% endfor %}
                {% if is_paginated %}
                <div class="pagination">
                    <span class="page-links">
                    {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}">Précedent</a> - 
                    {% endif %}
                    <span class="page-current">
                        Page {{ page_obj.number }} sur {{ page_obj.paginator.num_pages }}
                    </span>
                    {% if page_obj.has_next %} -
                    <a href="?page={{ page_obj.next_page_number }}">Suivant</a>
                    {% endif %}
                    </span>
                </div>
                {% endif %} 
            {% endif %}
            </form>
        </tbody>
    </table>
</div>

{% endblock %}
